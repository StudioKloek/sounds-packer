{"version":3,"file":"index.js","sources":["../src/lib/settings.js","../src/lib/util.js","../src/lib/codegenerator.js","../src/lib/packer.js","../src/lib/watcher.js","../src/index.js"],"sourcesContent":["import ora from 'ora';\nimport fs from 'fs-extra';\nimport get from 'get-value';\nimport defaults from 'object.defaults';\n\nexport async function readSettingsFrom(_file) {\n  const spinner = ora(`Reading settings from ${_file}...`).start();\n\n  let settings = {};\n\n  try {\n    const data = await fs.readJSON(_file);\n\n    settings = get(data, 'sounds', {});\n\n    settings = defaults(settings, {\n      sourceDirectory: './assets/',\n      scriptDirectory: './assets/converted/',\n      targetDirectory: './assets/converted/',\n      watch: false,\n      watchDelay: 500,\n      prefixes: [],\n      directories: []\n    });\n\n    // sort prefixes\n    settings.prefixes.sort((a, b) => {\n      const x = a,\n        y = b;\n\n      return x < y ? 1 : x > y ? -1 : 0;\n    });\n\n  } catch (error) {\n    console.log(error);\n    spinner.fail(`Could not load settings from ${_file}... (does it exist?)`);\n\n    return settings;\n  }\n\n  const numberOfDirectories = settings.directories.length;\n\n  if (numberOfDirectories) {\n    spinner.succeed(`Found ${numberOfDirectories} directories to process...`);\n\n  } else {\n    spinner.fail(`Found no directories to process...`);\n  }\n\n  return settings;\n}\n","export function makeVariableSafe(value) {\n  return value.replace(/(\\W)/g, '_').replace(/_{2,}/g, '.').replace(/^_/, '').replace(/_$/, '');\n}\n\nexport function kebabCase(value) {\n  return value\n    .replace(/([a-z0-9])([A-Z])/g, '$1-$2')\n    .replace(/([A-Z])([A-Z])(?=[a-z])/g, '$1-$2')\n    .toLowerCase();\n}\n","import { makeVariableSafe } from './util';\nimport get from 'get-value';\nimport set from 'set-value';\nimport pupa from 'pupa';\nimport uppercamelcase from 'uppercamelcase';\nimport camelcase from 'camelcase';\nimport fs from 'fs-extra';\nimport path from 'path';\n\nconst loaderInfoTemplate = `export default {\n  fileName : '{fileName}',\n  numberOfSounds : {numberOfSounds},\n  type: 'sounds'\n};`;\n\nconst assetTemplate = `export const {assetName} = {assetData};`;\n\nfunction convertPathToVariableName(filePath, basePath) {\n  // forceer string\n  filePath = `${filePath}`;\n\n  // basepath er af halen, path splitsen en opschonen\n  let parts = filePath.replace(`${basePath}/`, '').split('/').map(makeVariableSafe);\n\n  // haal laatste onderdeel er af\n  let lastPart = parts.pop();\n  lastPart = lastPart.toUpperCase();\n\n  // camelcase andere onderdelen\n  parts = parts.map(camelcase);\n\n  // haal titel elementen uit base path\n  let titleParts = basePath.split('/');\n  titleParts = titleParts.slice(titleParts.length - (titleParts.length === 1 ? 1 : 2));\n\n  titleParts.push('sounds');\n  titleParts = uppercamelcase(titleParts.join('-'));\n\n  if (parts.length > 0) {\n    filePath = parts.join('.');\n    filePath = filePath.replace(/(\\W^\\.)/g, '').replace(/\\.{2,}/g, '.').replace(/^\\./, '').replace(/\\.$/, '');\n    return [titleParts, filePath, lastPart].join('.');\n  }\n  else {\n    return [titleParts, lastPart].join('.');\n  }\n}\n\nfunction parseAssetData(files, assetPath) {\n  // bepaal base path\n  const basePath = assetPath,\n    parsedData = {};\n\n  for (const file of files || []) {\n\n    const assetInfo = {\n      id: file.hash,\n      duration: file.duration,\n      name: file.name,\n    }\n\n    set(parsedData, convertPathToVariableName(file.name, basePath), assetInfo);\n  }\n\n  return parsedData;\n}\n\nfunction getSortedItems(_itemsData) {\n  const itemsSortable = [];\n\n  for (const assetName of Object.keys(_itemsData)) {\n    if (_itemsData.hasOwnProperty(assetName)) {\n      itemsSortable.push([assetName, _itemsData[assetName]]);\n    }\n  }\n\n  itemsSortable.sort((a, b) => {\n    const x = a[0],\n      y = b[0];\n\n    return x < y ? -1 : x > y ? 1 : 0;\n  });\n\n  const items = {};\n  for (const item of itemsSortable) {\n    items[item[0]] = item[1];\n  }\n\n  return items;\n}\n\nfunction generateContents(parsedAssetData, loaderData) {\n  let contents = '';\n\n  // assets\n  for (const assetName of Object.keys(parsedAssetData)) {\n    const items = getSortedItems(parsedAssetData[assetName]);\n\n    let itemsContent = JSON.stringify(items, null, 2);\n    itemsContent = itemsContent.replace(/\"([^(\")\"]+)\":/g, \"$1:\");\n\n    contents = `${contents}${pupa(assetTemplate, {\n      assetName: assetName,\n      assetData: itemsContent\n    })}\\n`;\n  }\n\n  // loader\n  contents = `${contents}${pupa(loaderInfoTemplate, {\n    fileName: loaderData.fileName,\n    numberOfSounds: loaderData.numberOfSounds\n  })}\\n`;\n\n  return contents;\n}\n\nfunction getScriptPath(assetPath, scriptDirectory) {\n  const assetParts = assetPath.split('/'),\n    assetName = assetParts.pop();\n\n  if (assetParts.length < 2) {\n    assetParts.push(assetName);\n  }\n\n  assetPath = assetParts.join('/');\n\n  return `${path.join(scriptDirectory, assetPath)}/assets/sounds-${assetName}.ts`;\n}\n\nexport async function generateCode(assetPath, files, settings, itemOptions) {\n  const scriptDirectory = get(itemOptions, 'scriptDirectory', settings.scriptDirectory);\n\n  // parse data to object\n  const parsedAssetData = parseAssetData(files, assetPath),\n    loaderInfo = {\n      fileName: assetPath,\n      numberOfSounds: files.length\n    }\n\n\n  const contents = generateContents(parsedAssetData, loaderInfo),\n    scriptpath = getScriptPath(assetPath, scriptDirectory);\n\n  await fs.outputFile(scriptpath, contents);\n}\n","import path from 'path';\nimport ora from 'ora';\nimport logSymbols from 'log-symbols';\nimport chalk from 'chalk';\nimport fs from 'fs-extra';\nimport { generateCode } from './codegenerator';\nimport { getAudioDurationInSeconds } from 'get-audio-duration';\nimport globby from 'globby';\nimport hasha from 'hasha';\nimport { basename } from 'path';\n\nconst isPacking = {},\n  shouldPackAgain = {};\n\nexport async function packAll(directories, settings) {\n  console.log(logSymbols.info, chalk.blue(`Start packing all items...`));\n\n  // clean directory\n  console.log(logSymbols.info, chalk.blue(`Clearing sounds directory (${settings.targetDirectory})...`));\n  await fs.emptyDir(settings.targetDirectory);\n\n  for (const directory of directories) {\n    await pack(directory, settings);\n  }\n\n  console.log(logSymbols.success, chalk.green(`Done packing all items...`));\n}\n\nexport async function pack(directory, settings) {\n  let itemPath, itemOptions;\n\n  if (Array.isArray(directory)) {\n    itemPath = directory[0];\n    itemOptions = directory[1];\n  } else {\n    itemPath = directory;\n  }\n\n  if (isPacking[itemPath]) {\n    console.log(logSymbols.warning, chalk.yellow(`Allready packing, starting again afterwards...`));\n    shouldPackAgain[itemPath] = true;\n    return;\n  }\n\n  isPacking[itemPath] = true;\n\n  const spinner = ora(`Packing ${itemPath}`).start();\n\n  try {\n    // pack folder & generate code\n    const success = packFolder(itemPath, settings, itemOptions);\n\n    if (!success) {\n      spinner.fail(`Error packing ${itemPath}`);\n\n      return;\n    }\n  } catch (error) {\n    spinner.fail(`Error packing ${itemPath}`);\n    console.error(logSymbols.warning, error.message);\n\n    return;\n  }\n\n  isPacking[itemPath] = false;\n\n  if (shouldPackAgain[itemPath]) {\n    shouldPackAgain[itemPath] = false;\n    spinner.warn(`Needs repacking, something changed while packing...`);\n    await pack(directory, settings);\n  } else {\n    spinner.succeed(`Done packing ${itemPath}`);\n  }\n}\n\nasync function packFolder(itemPath, settings, itemOptions) {\n  const sourceDirectory = path.join(settings.sourceDirectory, itemPath);\n\n  // get all wav's\n  const paths = await globby(`${sourceDirectory}/*.wav`),\n    files = [];\n\n  for (const filepath of paths) {\n    // generate hash id\n    let hash = await hasha.fromFile(filepath, { algorithm: 'md5' });\n    hash = hash.substring(0, 10);\n\n    // get duration\n    let duration = await getAudioDurationInSeconds(filepath)\n    duration = Math.round(duration * 10000) / 10000;\n\n    const info = {\n      filename: basename(filepath, '.wav'),\n      duration,\n      hash,\n    }\n\n    // remove any prefix\n    let cleanedFileName = info.filename;\n    settings.prefixes.forEach(prefix => {\n      if (cleanedFileName.startsWith(prefix)) {\n        cleanedFileName = cleanedFileName.slice(prefix.length)\n      }\n    });\n    info.name = cleanedFileName;\n\n    files.push(info);\n  }\n\n  const copied = await copyFiles(itemPath, files, settings);\n\n  if (!copied) {\n    return false;\n  }\n\n  await generateCode(itemPath, files, settings, itemOptions);\n\n  return true;\n}\n\nasync function copyFiles(itemPath, files, settings) {\n\n  const sourceDirectory = path.join(settings.sourceDirectory, itemPath);\n\n  for (const file of files) {\n    try {\n      await fs.copy(`${path.join(sourceDirectory, file.filename)}.mp3`, `${path.join(settings.targetDirectory, file.hash)}.mp3`);\n      await fs.copy(`${path.join(sourceDirectory, file.filename)}.ogg`, `${path.join(settings.targetDirectory, file.hash)}.ogg`);\n    } catch (error) {\n      console.log(error)\n      return false;\n    }\n  }\n\n  return true;\n}\n\n","import path from 'path';\nimport { pack } from './packer';\nimport { sane } from 'sane';\nimport logSymbols from 'log-symbols';\nimport chalk from 'chalk';\nimport { debounce } from 'throttle-debounce';\n\nexport async function watch(directories, settings) {\n  for (const directory of directories) {\n    await watchDirectory(directory, settings);\n  }\n}\n\nasync function watchDirectory(directory, settings) {\n  return new Promise((_resolver) => {\n\n    let itemPath, itemOptions = {};\n\n    if (Array.isArray(directory)) {\n      itemPath = directory[0];\n      itemOptions = directory[1];\n    } else {\n      itemPath = directory;\n    }\n\n    if ((settings.watch !== true && itemOptions.watch !== true) || itemOptions.watch === false) {\n      _resolver();\n      return;\n    }\n\n    const delayedCallback = debounce(settings.watchDelay, () => {\n      pack(directory, settings);\n    });\n    const watcher = sane(`${path.join(settings.sourceDirectory, itemPath)}`, {\n      glob: ['**/*.png', '**/*.jpg']\n    });\n\n    watcher.on('ready', () => {\n      console.log(logSymbols.info, chalk.blue(`Started watching ${itemPath} with a delay of ${settings.watchDelay / 1000}s`));\n      _resolver()\n    });\n    watcher.on('change', delayedCallback);\n    watcher.on('add', delayedCallback);\n    watcher.on('delete', delayedCallback);\n  });\n}\n","import { readSettingsFrom } from './lib/settings';\nimport { watch } from './lib/watcher';\nimport { packAll } from './lib/packer';\n\nconst AssetFile = 'assets.json';\n\nasync function main(_file) {\n  const settings = await readSettingsFrom(_file),\n    directories = settings.directories;\n\n  delete settings.directories;\n\n  if (!settings || !directories) {\n    return;\n  }\n\n  await packAll(directories, settings);\n\n  await watch(directories, settings);\n}\n\nexport function pack(_file) {\n  main(_file || AssetFile);\n}\n"],"names":["path","getAudioDurationInSeconds","basename","debounce","sane","pack"],"mappings":"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"}